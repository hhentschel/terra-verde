{# This is the Store Product View template #}
{% extends "_layouts/main" %}

{% set img = product.articleImage is defined and product.articleImage is not empty
  ? product.articleImage.one()
  : null
%}

{% block content %}

   <div class="grid">
    <div class="row">
      <div class="col col-xs-12 col-md-12 col-lg-12">
      {% include '_components/breadcrumb.twig' %}

        {# {% set products = craft.products().type('supplies').limit(10).all() %}

        {% for product in products %}
          <li>{{ product.title}} - {{ product.defaultPrice |currency('CHF') }}</li>
        {% endfor %} #}

        {% set variant = product.defaultVariant %}

        <div class="">
            {# <img src="{{ product.productImage.one().getUrl('productListing') }}"
                 alt="{{ product.name }}"/> #}

        </div>
        <div class="">
            <h3>{{ product.title }}</h3>
            <p>{% if variant.stock > 0 %}<span
                        class="success label">vorrätig</span>{% else %}<span
                        class="alert label">nicht vorrätig</span>{% endif %}
            </p>
            <h4>
                {% if variant.onSale %}
                <strike>{{ variant.price | currency('CHF') }}</strike> {{ variant.salePrice | currency('CHF') }}
                {% else %}
                {{ variant.price | currency('CHF') }}</h4>
                {% endif %}
            <p>SKU: {{ variant.sku }}</p>

            {% include '_components/_content-elements/imageshop' %}

            <p>Kategorie: {{ product.articleCategories }}</p>

            {# Add cart Button #}
            <form method="POST">
                <input type="hidden" name="action"
                       value="commerce/cart/update-cart">
                <input type="hidden" name="cartUpdatedNotice"
                       value="Added {{ product.title }} to the cart.">
                {{ redirectInput('shop/cart') }}
                {{ csrfInput() }}
                <input type="hidden" name="qty" value="1">
                <input type="hidden" name="purchasableId"
                       value="{{ variant.id }}">
                <input class="button radius" type="submit" value="Add to cart">
            </form>

        </div>


        <div class="">
            <div class="row">
                <div class="product-description">
                    {# {% for block in product.productDescription.all() %}
                        {% switch block.type %}
                        {% case 'descriptionCopy' %}
                            {{ block.text }}
                        {% case 'productImage' %}
                            <div class="photo-inset">
                                <img src="{{ block.image.one().url() }}"
                                     alt="{{ block.caption }}"/>
                                <p class="caption">
                                    <small>{{ block.caption }}</small>
                                </p>
                            </div>
                        {% endswitch %}
                    {% endfor %} #}
                </div>
            </div>
        </div>
    </div>
    </div>
        </div>
    </div>
{% endblock %}
