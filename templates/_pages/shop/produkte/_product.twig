{# This is the Store Product View template #}
{% extends "/_layouts/main" %}




{% block content %}

    <div class="row">
        <div class="intro large-12 small-12 columns ">
            <p>
                <small><a href="/shop">&larr; zurück zum Shop</a></small>
            </p>
        </div>


        {# {% set products = craft.products().type('supplies').limit(10).all() %}

        {% for product in products %}
          <li>{{ product.title}} - {{ product.defaultPrice |currency('CHF') }}</li>
        {% endfor %} #}



        {% set variant = product.defaultVariant %}

        <div class="large-6 small-12 columns">
            <img src="{{ product.productImage.one().getUrl('productListing') }}"
                 alt="{{ product.name }}"/>
        </div>
        <div class="large-6 small-12 columns">
            <h3>{{ product.title }}</h3>
            <p>{% if variant.stock > 0 %}<span
                        class="success label">vorrätig</span>{% else %}<span
                        class="alert label">nicht vorrätig</span>{% endif %}
            </p>
            <h4>
                {% if variant.onSale %}
                <strike>{{ variant.price | currency('USD') }}</strike> {{ variant.salePrice | currency('USD') }}
                {% else %}
                {{ variant.price | currency('USD') }}</h4>
                {% endif %}
            <p>SKU: {{ variant.sku }}</p>

            {# Add cart Button #}
            <form method="POST">
                <input type="hidden" name="action"
                       value="commerce/cart/update-cart">
                <input type="hidden" name="cartUpdatedNotice"
                       value="Added {{ product.title }} to the cart.">
                {{ redirectInput('shop/cart') }}
                {{ csrfInput() }}
                <input type="hidden" name="qty" value="1">
                <input type="hidden" name="purchasableId"
                       value="{{ variant.id }}">
                <input class="button radius" type="submit" value="Add to cart">
            </form>

        </div>


        <div class="large-12 small-12 columns">
            <div class="row">
                <div class="product-description">
                    {% for block in product.productDescription.all() %}
                        {% switch block.type %}
                        {% case 'descriptionCopy' %}
                            {{ block.text }}
                        {% case 'productImage' %}
                            <div class="photo-inset">
                                <img src="{{ block.image.one().url() }}"
                                     alt="{{ block.caption }}"/>
                                <p class="caption">
                                    <small>{{ block.caption }}</small>
                                </p>
                            </div>
                        {% endswitch %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    </div>
{% endblock %}
